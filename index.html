<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ricochet Robots</title>
  
  <!--
  <link type="text/css" href="http://localhost:8000/assets/css/scrollbars.css" rel="stylesheet"/>
  <script type="text/javascript" src="http://localhost:8000/assets/js/OverlayScrollbars.min.js"></script>
  -->

  <style type="text/css">
    body {
        padding: 15rem;
        text-align: center;
        font-family: "Segoe UI";
        font-size: 140px;
        background: #1d1538;
        color: #aaa;
    }
    </style>

  <script type="text/javascript">

</script>

</head>
<body>

  <script type="text/javascript">
    
    // prevent backspace from redirecting browser

    var socket;
    var instance;
    
    function setupSocket() {
      socket = new WebSocket("ws://localhost:4000/ws/robots123")

      socket.onclose = function() {
        alert("Connection to the server has been lost.");
      }

      socket.onerror = function() {
     //   alert("Server connection has experienced an unknown error.");
      }

      socket.onopen = function() {
        // create room - skip for now
        // create player
        // start game
        
        data = '{"action": "create_room", "content": "this_is_my_room"}';
        console.log("Message from client:")
        console.log(data);
        socket.send( data );

       
        data = '{"action": "ping", "content": ""}';
        console.log("Message from client:")
        console.log(data);
        socket.send( data );
      

      }

      // reconnect on socket close?
      socket.addEventListener("close", () => {
       // this.setupSocket()
      })

      // got message from server
      socket.addEventListener("message", (event) => {
        console.log("Message from server:" + event.data)
        newJSON = JSON.parse(event.data)
        console.log( newJSON );
      })

    }


    window.onload = function() {
      setupSocket();
    }
   



  </script>

Ricochet robot

</body>
</html>